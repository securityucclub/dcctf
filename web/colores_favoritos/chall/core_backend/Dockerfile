FROM python:3
ENV PYTHONUNBUFFERED 1

ARG SECRET_KEY

ARG POSTGRES_TABLE_NAME 
ARG POSTGRES_USER 
ARG POSTGRES_PASSWORD 
ARG POSTGRES_HOST 
ARG POSTGRES_PORT

ARG DEBUG
ARG HTTPS

ARG DJANGO_SETTINGS_MODULE

ENV SECRET_KEY $SECRET_KEY

ENV POSTGRES_TABLE_NAME $POSTGRES_TABLE_NAME
ENV POSTGRES_USER $POSTGRES_USER
ENV POSTGRES_PASSWORD $POSTGRES_PASSWORD
ENV POSTGRES_HOST $POSTGRES_HOST 
ENV POSTGRES_PORT $POSTGRES_PORT

ENV DEBUG $DEBUG
ENV HTTPS $HTTPS

ENV DJANGO_SETTINGS_MODULE $DJANGO_SETTINGS_MODULE

WORKDIR /django
COPY requirements.txt requirements.txt
RUN pip3 install -r requirements.txt
ENTRYPOINT ["./entrypoint.sh"]

COPY . .